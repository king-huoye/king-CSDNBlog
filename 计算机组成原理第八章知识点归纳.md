# CPU的结构和功能

## CPU的功能

### 取指令

### 分析指令

### 执行指令

## CPU的寄存器

### 用户可见寄存器

- 通用寄存器
- 数据寄存器
- 地址寄存器
- 条件码寄存器

### 控制和状态寄存器

- MAR

    用于存放将被访问的存储单元的地址

- MDR

    用于存放欲存入存储器的数据或最近从存储器中读出的数据

- PC

    存放先行指令的地址

- IR

    存放当前欲执行的指令

## 指令周期

### 取址

### 间址

### 执行

### 中断

## 指令流水

### 好处

- 提高器件的性能
- 改进系统的结构，开发系统的并行性

### 原理

### 影响因素

- 结构相关

    不同指令争用同一功能部件产生资源冲突时产生

- 数据相关
- 控制相关

    由转移指令产生

### 流水线性能

- 吞吐率

    吞吐率是指单位时间内流水线所完成指令或输出结果的数量。 实际吞吐率是指流水线完成n条指令的实际吞吐率

- 加速比

    指m段流水线的速度与等功能的非流水线的速度之比 公式为：mn/(m+n-1),其中n为指令条数

- 效率

### 多发技术

- 超标量技术

    是指在每个时钟周期内可同时并发多条独立指令

- 超流水线技术
- 超长指令技术

    采用多条指令在多个处理器部件中并行处理的体系结构，在一个时钟周期内能流出多条指令。

### 超流水线结构

- 指令流水线结构
- 运算流水线

## 中断系统

### 中断的因素

- 人为
- 程序性事故

    比如定点溢出、操作码不能识别、除法分母为0

- 硬件故障

    插件接触不良、通风不良、电源掉电

- I/O设备
- 外部事件

### 中断请求标记和中断判优逻辑

- 中断请求触发器为INTR为1
- 中断判优
    - 硬件排队
    - 软件排队
- 中断服务程序入口地址的寻找
    - 硬件向量法
    - 软件查询法

### 保护现场和恢复现场

- 保护程序断点
- 保护CPU内部各寄存器内容的现场两个方面

### 中断屏蔽技术

主要应用于多重中断

- 实现多重中断的条件
    - 提前设置“开中断”指令
    - 优先级别高的中断源有权中断优先级别低的中断源
    - 屏蔽技术
        - 屏蔽触发器与屏蔽字
        - 子主题 2
